webpackJsonp([17],{112:function(e,t,o){o(389);var i=o(41)(o(527),o(358),null,null);e.exports=i.exports},310:function(e,t,o){t=e.exports=o(8)(),t.push([e.i,".el-input{position:relative;font-size:14px;display:inline-block;width:auto}",""])},358:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"table"},[o("div",{staticClass:"crumbs"},[o("el-breadcrumb",{attrs:{separator:"/"}},[o("el-breadcrumb-item",[o("i",{staticClass:"el-icon-menu"}),e._v(" 灰度更新")]),e._v(" "),o("el-breadcrumb-item",[e._v("APP端")])],1)],1),e._v(" "),o("div",{staticClass:"crumbs"},[o("el-dialog",{attrs:{title:"新增",size:"tiny"},model:{value:e.dialogAddVisible,callback:function(t){e.dialogAddVisible=t},expression:"dialogAddVisible"}},[o("el-form",{attrs:{model:e.version}},[o("el-form-item",{attrs:{label:"更新地址","label-width":e.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.version.updateUrl,callback:function(t){e.$set(e.version,"updateUrl",t)},expression:"version.updateUrl"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"更新标题","label-width":e.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.version.updateTitle,callback:function(t){e.$set(e.version,"updateTitle",t)},expression:"version.updateTitle"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"更新信息","label-width":e.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.version.updateInfo,callback:function(t){e.$set(e.version,"updateInfo",t)},expression:"version.updateInfo"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"版本号","label-width":e.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.version.versionNumber,callback:function(t){e.$set(e.version,"versionNumber",t)},expression:"version.versionNumber"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"操作系统","label-width":e.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择操作系统"},model:{value:e.version.osType,callback:function(t){e.$set(e.version,"osType",t)},expression:"version.osType"}},[o("el-option",{attrs:{label:"android",value:"android"}}),e._v(" "),o("el-option",{attrs:{label:"ios",value:"ios"}})],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.handleAddCancel()}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleAddConfirm(e.version)}}},[e._v("确 定")])],1)],1),e._v(" "),o("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){e.handleAdd()}}},[e._v("新增版本")]),e._v(" "),o("el-button",{attrs:{size:"small",type:"success"},on:{click:function(t){e.gotoGray()}}},[e._v("查看策略")])],1),e._v(" "),o("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.tableLoading,expression:"tableLoading",modifiers:{body:!0}}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[o("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),e._v(" "),o("el-table-column",{attrs:{prop:"updateUrl",label:"更新地址","show-overflow-tooltip":"true"}}),e._v(" "),o("el-table-column",{attrs:{prop:"updateTitle",label:"更新标题","show-overflow-tooltip":"true"}}),e._v(" "),o("el-table-column",{attrs:{prop:"updateInfo",label:"更新信息","show-overflow-tooltip":"true"}}),e._v(" "),o("el-table-column",{attrs:{prop:"versionNumber",label:"版本号"}}),e._v(" "),o("el-table-column",{attrs:{prop:"osType",label:"操作系统",filters:[{text:"ios",value:"ios"},{text:"android",value:"android"}],"filter-method":e.filterTag},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-tag",{attrs:{type:"ios"===t.row.osType?"primary":"success","close-transition":""}},[e._v("\n                "+e._s("ios"===t.row.osType?"ios":"android")+"\n                ")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-dialog",{attrs:{title:"编辑",size:"tiny"},model:{value:e.dialogEditVisible,callback:function(t){e.dialogEditVisible=t},expression:"dialogEditVisible"}},[o("el-form",{attrs:{model:e.version}},[o("el-form-item",{attrs:{label:"更新地址","label-width":e.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.version.updateUrl,callback:function(t){e.$set(e.version,"updateUrl",t)},expression:"version.updateUrl"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"更新标题","label-width":e.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.version.updateTitle,callback:function(t){e.$set(e.version,"updateTitle",t)},expression:"version.updateTitle"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"更新信息","label-width":e.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.version.updateInfo,callback:function(t){e.$set(e.version,"updateInfo",t)},expression:"version.updateInfo"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"版本号","label-width":e.formLabelWidth}},[o("el-input",{attrs:{"auto-complete":"off"},model:{value:e.version.versionNumber,callback:function(t){e.$set(e.version,"versionNumber",t)},expression:"version.versionNumber"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"操作系统","label-width":e.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择操作系统"},model:{value:e.version.osType,callback:function(t){e.$set(e.version,"osType",t)},expression:"version.osType"}},[o("el-option",{attrs:{label:"android",value:"android"}}),e._v(" "),o("el-option",{attrs:{label:"ios",value:"ios"}})],1)],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(o){e.handleEditCancel(t.row)}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleEditConfirm(e.version)}}},[e._v("确 定")])],1)],1),e._v(" "),o("el-button",{attrs:{size:"small",type:"info"},on:{click:function(o){e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),o("el-button",{attrs:{size:"small",type:"danger"},on:{click:function(o){e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),o("div",{staticClass:"pagination"},[o("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"total, prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]}},389:function(e,t,o){var i=o(310);"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);o(40)("2fb9c3e0",i,!0)},527:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{total:30,pageSize:10,currentPage:1,tableData:[],version:{},dialogEditVisible:!1,dialogAddVisible:!1,formLabelWidth:"120px",tableLoading:!1}},mounted:function(){this.$http.get("/v1/GrayReleased/versions").then(function(e){this.tableData=e.body.response_param},function(){console.log("请求失败处理")})},methods:{handleCurrentChange:function(e){this.currentPage=e,this.getAllversions(),console.log("当前页: "+e)},getAllversions:function(){this.$http.get("/v1/GrayReleased/versions?pageNum="+this.currentPage+"&pageSize="+this.pageSize).then(function(e){this.tableData=e.body.response_param},function(){console.log("请求失败处理")})},gotoGray:function(){this.$router.push("/appgrayreleaed")},filterTag:function(e,t){return t.osType===e},handleEdit:function(e,t){this.version=t,this.dialogEditVisible=!0},handleEditCancel:function(){this.getAllversions(),this.dialogEditVisible=!1},handleEditConfirm:function(e){var t=this;this.editVersionById(e),this.tableLoading=!0,setTimeout(function(){t.tableLoading=!1,t.getAllversions()},500),this.dialogEditVisible=!1},handleDelete:function(e,t){var o=this;this.$confirm("此操作将【删除】此版本","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.deleteVsersionById(t.xwId),o.tableLoading=!0,setTimeout(function(){o.tableLoading=!1,o.getAllversions()},500)}).catch(function(){o.$message({type:"info",message:"已取消删除"})})},editVersionById:function(e){this.$http.put("/v1/GrayReleased/versions/"+e.xwId,{updateUrl:e.updateUrl,updateInfo:e.updateInfo,versionNumber:e.versionNumber,osType:e.osType,updateTitle:e.updateTitle}).then(function(e){this.result(e.body.response_param,"编辑")},function(){this.$message.error("编辑失败！")})},deleteVsersionById:function(e){this.$http.delete("/v1/GrayReleased/versions/"+e).then(function(e){this.result(e.body.response_param,"删除")},function(){this.$message.error("删除失败！")})},handleAdd:function(){this.version={},this.dialogAddVisible=!0},handleAddCancel:function(){this.dialogAddVisible=!1},handleAddConfirm:function(e){var t=this;this.addVersion(e),this.tableLoading=!0,setTimeout(function(){t.tableLoading=!1,t.getAllversions()},500),this.dialogAddVisible=!1},addVersion:function(e){this.$http.post("/v1/GrayReleased/versions",{updateUrl:e.updateUrl,updateInfo:e.updateInfo,versionNumber:e.versionNumber,osType:e.osType,updateTitle:e.updateTitle}).then(function(e){this.result(e.body.response_param,"新增")},function(){this.$message.error("新增失败！")})},result:function(e,t){"true"==e?this.$message.success(t+"成功！"):this.$message.error(t+"失败！")}}}}});