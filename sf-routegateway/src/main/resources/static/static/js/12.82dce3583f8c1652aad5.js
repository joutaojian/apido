webpackJsonp([12],{128:function(e,t,n){n(384);var o=n(41)(n(543),n(348),null,null);e.exports=o.exports},131:function(e,t){var n=e.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},132:function(e,t,n){var o=n(131),i=o.JSON||(o.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},135:function(e,t,n){e.exports={default:n(132),__esModule:!0}},305:function(e,t,n){t=e.exports=n(8)(),t.push([e.i,"",""])},348:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"table"},[n("div",{staticClass:"crumbs"},[n("el-breadcrumb",{attrs:{separator:"/"}},[n("el-breadcrumb-item",[n("i",{staticClass:"el-icon-menu"}),e._v("系统")]),e._v(" "),n("el-breadcrumb-item",[e._v("版本管理")])],1)],1),e._v(" "),n("el-row",[n("el-col",{attrs:{span:24}},[n("el-button",{attrs:{type:"primary",icon:"plus"},on:{click:function(t){e.editDialog=!0,e.isEdit=!1}}},[e._v("新增")])],1)],1),e._v(" "),n("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.versions,border:"",height:"600"}},[n("el-table-column",{attrs:{prop:"versionno",label:"版本号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"realport",label:"端口号"}}),e._v(" "),n("el-table-column",{attrs:{prop:"versionTime",label:"版本时间点"}}),e._v(" "),n("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){e.editByIndex(t.$index,e.versions)}}},[e._v("编辑")]),e._v(" "),n("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(n){n.preventDefault(),e.deleteOneByIndex(t.$index,e.versions)}}},[e._v("移除")])]}}])})],1),e._v(" "),n("div",{staticClass:"pagination"},[n("el-pagination",{attrs:{layout:"prev, pager, next",total:e.page.total,"page-size":e.page.size,"current-page":e.page.current},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),n("el-dialog",{attrs:{title:"版本管理","show-close":!1},model:{value:e.editDialog,callback:function(t){e.editDialog=t},expression:"editDialog"}},[n("el-form",{attrs:{model:e.editVersion}},[n("el-form-item",{attrs:{label:"版本号","label-width":e.labelWidth}},[n("el-input",{attrs:{"auto-complete":"off",disabled:e.isEdit},model:{value:e.editVersion.versionno,callback:function(t){e.$set(e.editVersion,"versionno",t)},expression:"editVersion.versionno"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"端口号","label-width":e.labelWidth}},[n("el-input",{attrs:{type:"number",min:"80",max:"20000","auto-complete":"off"},model:{value:e.editVersion.realport,callback:function(t){e.$set(e.editVersion,"realport",t)},expression:"editVersion.realport"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"版本时间点","label-width":e.labelWidth}},[n("el-input",{attrs:{type:"number","auto-complete":"off"},model:{value:e.editVersion.versionTime,callback:function(t){e.$set(e.editVersion,"versionTime",t)},expression:"editVersion.versionTime"}})],1)],1),e._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:e.closeEditDialog}},[e._v("取 消")]),e._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveVersion(e.editVersion)}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]}},384:function(e,t,n){var o=n(305);"string"==typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);n(40)("d5946852",o,!0)},543:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(135),i=n.n(o);t.default={data:function(){return{versions:[{versionno:"7.2",realport:8084,versionTime:20170315}],editDialog:!1,editIndex:-1,editVersion:{},isEdit:!0,labelWidth:"120px",page:{total:0,size:0,current:0},query:{}}},methods:{deleteOneByIndex:function(e,t){var n=this;this.$confirm("是否确定继续操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var o={versionNo:t[e].versionno};n.$http.delete("/v1/config/deleteVersion",{params:o}).then(function(o){1==o.body.response_param?(t.splice(e,1),n.successFunc("删除成功！")):n.warnFunc("删除失败！")},function(e){console.log(e),n.errorFunc(e.body.error_msg)})}).catch(function(){this.$message({type:"info",message:"已取消删除"})})},editByIndex:function(e,t){var n=this;n.editVersion=JSON.parse(i()(t[e])),n.editIndex=e,n.editDialog=!0,n.isEdit=!0},closeEditDialog:function(){var e=this;console.log(e.editVersion),e.editVersion={},e.editIndex=-1,e.editDialog=!1},saveVersion:function(e){var t=this;t.$http.post("/v1/config/saveVersion",e).then(function(e){if(1==e.body.response_param){t.successFunc("保存成功！");var n=t.page.current;t.page.current=0,t.getTotal(n)}else t.warnFunc("保存失败！");t.editVersion={},t.editIndex=-1,t.editDialog=!1},function(e){t.errorFunc(e.body.error_msg)})},getTotal:function(e){var t=this;t.$http.get("/v1/config/getVersionTotal").then(function(n){t.page.total=n.body.response_param.total,t.page.size=n.body.response_param.pageSize,t.page.current=e},function(e){console.log(e),t.errorFunc(e.body.error_msg)})},handleCurrentChange:function(e){var t=this,n=JSON.parse(i()(t.query));n.pageNum=e,t.$http.get("/v1/config/listVersions",{params:n}).then(function(e){t.versions=e.body.response_param},function(e){t.errorFunc(e.body.error_msg)})},errorFunc:function(e){this.$message.error(e)},warnFunc:function(e){this.$message({message:e,type:"warning"})},successFunc:function(e){this.$message({message:e,type:"success"})}},mounted:function(){this.getTotal(1)}}}});